CREATE TABLE CUSTOMER(
    ID NUMBER(3),
    NAME VARCHAR2(21),
    AGE NUMBER(3),
    ADDRESS VARCHAR2(30),
    SALARY NUMBER(7,2),
    CONSTRAINT CPKEY PRIMARY KEY(ID)
);

SET SERVEROUTPUT ON;
--TRIGGER
CREATE OR REPLACE TRIGGER SAL_UPDATE BEFORE INSERT OR UPDATE OR DELETE ON CUSTOMER FOR EACH ROW
DECLARE
V_OLD_SAL CUSTOMER.SALARY % TYPE;
V_NEW_SAL CUSTOMER.SALARY % TYPE;

BEGIN
	IF INSERTING THEN
		DBMS_OUTPUT.PUT_LINE('NEW SALARY: '||:NEW.SALARY);
	ELSIF UPDATING THEN
		V_OLD_SAL := :OLD.SALARY;
		V_NEW_SAL := :NEW.SALARY;
		DBMS_OUTPUT.PUT_LINE('OLD SALARY: '|| V_OLD_SAL);
		DBMS_OUTPUT.PUT_LINE('NEW SALARY: '|| V_NEW_SAL);
		IF V_OLD_SAL IS NOT NULL AND V_NEW_SAL IS NOT NULL THEN
			DBMS_OUTPUT.PUT_LINE('DIFFERENCE BETWEEN SALARY IS: '|| (V_NEW_SAL-V_OLD_SAL));
		END IF;
	ELSIF DELETING THEN
		DBMS_OUTPUT.PUT_LINE('OLD SALARY : '||:OLD.SALARY);
	END IF;
END;
/